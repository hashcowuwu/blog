---
layout: post
title: 并发学习笔记 
date: 2023-05-13
Author: Shengbin 
tags: [algorithm]
comments: true
toc: true
---

# Every Computer System Is a State Machine

基础并发学习笔记

>并发的概念是由操作系统的发展衍生而形成，本文为操作系统并发学习笔记，作者水平有限若本文有误请联系erfu81856@gmail.com

## 前言 🍎

随着制程提升的越来越缓慢，多处理器时代的来临。在现代PC上我们通过并发来使性能得到几倍甚至几时倍的提升变得很有必要.

并发(Concurrency)不等于并行(parallel)。尽管他们都是在同一时间的多个线程同时执行，在并行计算中是在同一个物理时刻执行，且并行计算无法运行在单核上。并发系统的任务(tasks)执行时间取决与调度且并发任务可以运行在单核上。
并发的难度在于**现代CPU乱序执行，编译器优化，宽松内存模型**，并发控制则是确保不同计算执行之间的交互或通信的正确顺序，并协调对执行之间共享的资源的访问。

错误的并发会造成数据竞争(Data Race)，解决并发的最好的方法就是不并发,同步原语通过限制部分并发来实现对程序的协调。通过同步原语来实现并发控制。

## 同步原语 🍏

### 互斥(Mutual exclusion)🔒

当我们在某个时刻不想并发时.通过互斥来实现在线程切换前时完成操作,保障在时间段内只有线程对资源的控制。互斥锁保证的区域通常被称作临界区此类问题通常被称做临界区问题。,互斥锁的实现单核系统上的处理通常是用关中断来实现或自旋。多核上则是通过硬件提供的原子操作设计的软件算法解决。只有正确使用锁才能实现正确的实现并发的处理。

#### 自旋锁🌪

应用层面自旋锁是由软件算法与操作系统所提供的api一起实现的,内核层要正确实现互斥需要关中断(保证操作的原子性避免死锁)+自旋。上锁解锁前后状态不变,保存状态








